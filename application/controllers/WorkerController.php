<?php

class WorkerController extends Zend_Controller_Action
{
	public function init()
	{
		// Disable the main layout renderer
		$this->_helper->layout->disableLayout();
		// Do not even attempt to render a view
		$this->_helper->viewRenderer->setNoRender(true);
	}
	
	public function twitterfriendsAction()
	{
		if($this->getRequest()->isPost()) {
			$data = $this->getRequest()->getPost();
			$friends = OpenSwitch_Twitter::getFriendsList($data['username']);
			
			$result = array();
			foreach($friends as $screen_name => $friend) {
				if(OpenSwitch_Identica::userExists($screen_name)) {
					$result['statusnet'][] = (array)$friend;
				} else {
					$result['twitter'][] = (array)$friend;
				}
			}
			
			echo json_encode($result);
			
			//echo '{"twitter":[{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/1179529812\/tm-icon2_normal.jpg","screen_name":"Ticketmaster","name":"Ticketmaster"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/404972897\/twitterProfilePhoto_normal.jpg","screen_name":"miljar","name":"Tom Van Herreweghe"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/997305277\/twitter-profile_normal.jpg","screen_name":"tylergray","name":"Tyler Gray"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/887839708\/Profile_Picture_normal.jpg","screen_name":"DanielKnisley","name":"Dan Knisley"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/1270133735\/CSFastball_normal.jpg","screen_name":"charliesheen","name":"Charlie Sheen"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/967920958\/n14403246_31180252_2949642_normal.jpg","screen_name":"EricHLewis","name":"Eric Howard Lewis"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/1046046795\/twitterlogo_normal.png","screen_name":"Hostedd","name":"Hosted Game Servers"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/1038876181\/todd_normal.jpg","screen_name":"debaser","name":"Todd Zeigler"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/557476019\/tbg_normal.jpg","screen_name":"bivings","name":"The Bivings Group"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/1263250515\/me_normal.png","screen_name":"jwage","name":"Jonathan H. Wage"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/66861650\/twitterSG_normal.jpg","screen_name":"servergrove","name":"ServerGrove Networks"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/728337241\/conan_4cred_normal.jpg","screen_name":"ConanOBrien","name":"Conan O\'Brien"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/404767174\/BK2_normal.jpg","screen_name":"billkarwin","name":"Bill Karwin"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/1150188687\/ZendCard.croped200px_normal.jpg","screen_name":"ac_4","name":"Alton T Crossley IV"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/907197213\/n535576948_3880_normal.jpg","screen_name":"gibhut","name":"Alan Todd"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/919638448\/me_normal.jpg","screen_name":"Hoggle_","name":"Westin Shafer"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/342875290\/photo-1_normal.jpg","screen_name":"johannacherry","name":"johannacherry"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/918725958\/flat_cap_in_thought_normal.jpg","screen_name":"JeremyKendall","name":"Jeremy Kendall"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/916625787\/e2241c88-8904-49b4-9464-508f3b3d9cc1_normal.png","screen_name":"zburnham","name":"Zachary Burnham"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/208948704\/neal_normal.jpg","screen_name":"nanderoo","name":"Neal Anders"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/1185730913\/eschrade-logo_normal.png","screen_name":"kpschrade","name":"Kevin Schroeder"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/1135432987\/image_normal.jpg","screen_name":"ZendUncon","name":"Zend uncon sessions"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/1180391867\/tek-logo-tweeter_normal.png","screen_name":"mtacon","name":"TEK 11 Conference"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/1198260226\/turkey_leg_normal.jpg","screen_name":"maggie1000","name":"Maggie Nelson"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/81792529\/phpc_bigger_normal.png","screen_name":"phpcommunity","name":"PHP Community"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/264492501\/phptek_arbi_isolated_normal.jpg","screen_name":"arzoum","name":"Arbi Arzoumani"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/347823051\/Adam_Savage_Plushie_by_Elvira_kruspe_normal.jpg","screen_name":"donttrythis","name":"Adam Savage"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/1191887388\/ilia_normal.jpg","screen_name":"iliaa","name":"Ilia Alshanetsky"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/480594738\/headshot_normal.jpg","screen_name":"ralphschindler","name":"Ralph Schindler"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/696958505\/twitter_normal.png","screen_name":"ibuildings","name":"ibuildings"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/1129402539\/tumblr_l8tvdeY7B81qzytubo1_1280_1__normal.jpg","screen_name":"anamanaguchi","name":"Anamanaguchi"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/1178456090\/new_headshot_normal.jpg","screen_name":"bdeshong","name":"Brian DeShong"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/422153143\/logo_kreis_weiss_unten_links_normal.png","screen_name":"arneblankerts","name":"Arne Blankerts"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/727991509\/bradley-holt-300x300_normal.jpg","screen_name":"BradleyHolt","name":"Bradley Holt"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/421749536\/twitterProfilePhoto_normal.jpg","screen_name":"itrebal","name":"Graham Christensen"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/670473652\/befunky_artwork_normal.jpg","screen_name":"Remi_Woler","name":"Remi Woler"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/1173981860\/IMG_0766_normal.JPG","screen_name":"aaronmccall","name":"Aaron McCall"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/1187185449\/notchface_normal.png","screen_name":"notch","name":"Markus Persson"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/716602913\/_DSC4990-2_normal.jpg","screen_name":"yochum","name":"Andrew Yochum"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/792221815\/Angry_batman_normal.JPG","screen_name":"God_Damn_Batman","name":"The Batman"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/60788011\/candle_normal.jpg","screen_name":"SilverRocket","name":"Joshua Malinsky"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/66187511\/phpcamplogo_normal.png","screen_name":"phpcamp","name":"phpcamp"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/779746215\/vidluther_normal.png","screen_name":"vidluther","name":"Vid Luther"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/789100630\/DellKACE-twitter_logo_normal.gif","screen_name":"DellKACE","name":"Dell KACE\u2122 "},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/300491638\/ZendCon09-logo-square-light-blue_normal.gif","screen_name":"zendcon","name":"ZendCon"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/651575553\/twittergithub2_normal.png","screen_name":"github","name":"GitHub"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/117657135\/tycho_avatar_normal.jpg","screen_name":"TychoBrahe","name":"TychoBrahe"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/946973946\/php-med-trans_normal.png","screen_name":"nwopug","name":"NWO-PUG"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/1067649220\/avatar_normal.jpg","screen_name":"EchoBazaar","name":"Echo Bazaar"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/927416334\/bptwitterlogo_normal.jpg","screen_name":"BPGlobalPR","name":"BP Public Relations"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/1261438355\/Thumbs_up_normal.jpg","screen_name":"dannypudi","name":"Danny Pudi"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/1181869820\/jeffhs_normal.jpg","screen_name":"Tetraboy","name":"Jefferson McCree"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/460026756\/SLcircle_normal.JPG","screen_name":"strangeloopnet","name":"Strangeloop"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/200251034\/400x400square_normal.jpg","screen_name":"vlucas","name":"Vance Lucas"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/793152838\/wss_twitter_tile_normal.png","screen_name":"WebsiteSpark","name":"WebsiteSpark"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/1256086469\/eightbit-297a84c2-f53f-4794-8bef-e4b028cd2177_normal.png","screen_name":"Pruett","name":"Kevin Pruett"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/1196082760\/pastedGraphic_normal.jpg","screen_name":"joelmchale","name":"Joel McHale"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/241457861\/RGHeadshotLowRes_normal.JPG","screen_name":"realredgreen","name":"Red Green"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/1153254049\/Mac_BU_SM_Logo_Square_normal.jpg","screen_name":"officeformac","name":"Office for Mac"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/272007784\/Richard_Horvitz_normal.jpg","screen_name":"RichardHorvitz","name":"Richard Horvitz"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/213901530\/51AZR3059KL._SS500__normal.jpg","screen_name":"JhonenV","name":"Jhonen Vasquez"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/663692092\/farm_normal.jpg","screen_name":"fireland","name":"Joshua Allen"},{"profile_image":"http:\/\/a0.twimg.com\/sticky\/default_profile_images\/default_profile_3_normal.png","screen_name":"spazandroidtest","name":"Chris"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/537212781\/tw_normal.png","screen_name":"twidroyd","name":"twidroyd"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/760887226\/DP_twitter_icon_normal.jpg","screen_name":"dealsplus","name":"Deals and Coupons"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/52029012\/userpic-photo_normal.gif","screen_name":"deadprogrammer","name":"Michael Krakovskiy"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/76375582\/Netflix_API2_57x57_normal.png","screen_name":"netflix","name":"Netflix"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/218283715\/Daniel-Tosh---Shot_2-12976_normal.gif","screen_name":"danieltosh","name":"daniel tosh"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/1180392141\/phpadvent-twitter_normal.jpg","screen_name":"phpadvent","name":"PHP Advent"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/528865721\/php-planet_normal.png","screen_name":"planet_php","name":"Planet PHP"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/1190360339\/ivo_portrait_normal.jpg","screen_name":"ijansch","name":"Ivo Jansch"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/1100061903\/3672527983_911d890264_oSmall_normal.jpg","screen_name":"joshholmes","name":"Josh Holmes"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/234959852\/PHPA-logo-TWEETER-icon_normal.gif","screen_name":"phparch","name":"php|architect"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/598755044\/faps-interro-twitavatar_normal.jpg","screen_name":"FakeAPStylebook","name":"Fake AP Stylebook"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/305785095\/Photo_36_normal.jpg","screen_name":"patrickmcgovern","name":"patrick mcgovern"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/61034853\/hs2_normal.jpg","screen_name":"pubal","name":"Jason"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/374757042\/twitterProfilePhoto_normal.jpg","screen_name":"padraicb","name":"P\u00e1draic Brady"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/1073330120\/image_0713_normal.jpg","screen_name":"MisfitGeek","name":"JoeStagner"},{"profile_image":"http:\/\/a3.twimg.com\/sticky\/default_profile_images\/default_profile_6_normal.png","screen_name":"GMICnagging","name":"GMICnagging"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/1140334426\/Photo_on_2010-10-08_at_19.16_normal.jpg","screen_name":"snipeyhead","name":"snipe \u30c4"}],"statusnet":[{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/1185906326\/HighwayOne__normal.jpg","screen_name":"dzuelke","name":"David Zuelke"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/76190782\/Picture_4_normal.jpg","screen_name":"gwoo","name":"gwoo"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/1104267729\/user578865_pic1531_1219002858_thumb_normal.jpg","screen_name":"mfacenet","name":"Shawn Stratton"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/1182103177\/5157075816_c8f9d46110_o_normal.jpeg","screen_name":"jperras","name":"Joel Perras"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/1178723357\/dcousineau_icon_normal.png","screen_name":"dcousineau","name":"Daniel Cousineau"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/734253815\/n644648272_5107_normal.jpg","screen_name":"lsmith","name":"Lukas Kahwe Smith"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/126087338\/zendlogolarge_normal.gif","screen_name":"zend","name":"zend"},{"profile_image":"http:\/\/a3.twimg.com\/profile_images\/51728177\/me_normal.jpg","screen_name":"lig","name":"ligaya turmelle"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/54446691\/iojup_cassini_big_normal.jpg","screen_name":"pmjones","name":"pmjones"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/151002461\/def-thumb_normal.gif","screen_name":"appliedi","name":"Applied Innovations"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/1215298340\/Kristof_Kovacs_mugshot_normal.jpg","screen_name":"kkovacs","name":"Kristof Kovacs"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/235023861\/profile_normal.jpg","screen_name":"scottmac","name":"Scott MacVicar"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/938351463\/bramsey-square_normal.png","screen_name":"ramsey","name":"Ben Ramsey"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/417918767\/cap_square_normal.jpg","screen_name":"akrabat","name":"Rob Allen"},{"profile_image":"http:\/\/a2.twimg.com\/profile_images\/1165620716\/fabien-potencier_normal.jpg","screen_name":"fabpot","name":"Fabien Potencier"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/449128149\/twitterProfilePhoto_normal.jpg","screen_name":"drydenmaker","name":"DrydenMaker"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/1247484450\/161474_684381457_6281948_q_normal.jpg","screen_name":"jonobacon","name":"Jono Bacon"},{"profile_image":"http:\/\/a0.twimg.com\/profile_images\/1101720021\/125x125_normal.png","screen_name":"ohiolinux","name":"ohiolinux"},{"profile_image":"http:\/\/a1.twimg.com\/profile_images\/58951894\/icon_normal.jpg","screen_name":"tweenky","name":"Tweenky"}]}';
		}
	}
	
	public function usernameAction()
	{
		if($this->getRequest()->isPost()) {
			$data = $this->getRequest()->getPost();
			$exists = OpenSwitch_Identica::userExists($data['username']);
			echo json_encode(array('exists' => $exists));
		}
	}
}